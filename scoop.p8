pico-8 cartridge // http://www.pico-8.com
version 16
__lua__

--
-- scooping water from a sinking boat, with a bucket
--
-- a practice sketch for designing inputs
--
-- process:
--
--  x. design
--  x. paper sketch
--  3. no art early playable
--  4. one feature at a time
--  5. ship
--

--
-- utils.
--

local color = {
  blue = 12,
  peach = 15,
}

--
-- actors.
--

function ocean(t) -- 't' stands for table.
  return {
    y = t.y,
  }
end

function boat(t)
  return {
    x = t.x,
    y = t.y,
    waterlog = 0,
  }
end

function player(t)
  return {
    x = t.x,
    y = t.y,
  }
end

--
-- game loop.
--

local actors = {}

function _init()
  actors.ocean = ocean{
    y = 80,
  }

  actors.boat = boat{
    x = 64,
    y = actors.ocean.y - 4,
  }

  actors.player = player{
    x = 64 + 15,
    y = actors.boat.y - 4,
  }
end

local t = 0

function _update60()
  -- advance time.
  -- TODO: fix overflow.
  t += 1

  -- increase water level by 6 per second.
  actors.boat.waterlog += 0.1
end

function _draw()
  cls(color.peach)

  -- draw ocean.
  rectfill(
    0, actors.ocean.y,
    127, 127,
    color.blue)

  -- spr(n, x, y, [w, h], [flip_x], [flip_y])

  -- draw boat.
  spr(1, actors.boat.x, actors.boat.y, 4, 1)

  -- draw player.
  spr(5 + ((t/60)%2), actors.player.x, actors.player.y)

  -- print waterlog.
  print(actors.boat.waterlog)
end
__gfx__
00000000044555555555555555555555555554400888888000000000077777700000000000000000000000000000000000000000000000000000000000000000
000000000044555555555555555555555555440008a88a8008888880777557770000000000000000000000000000000000000000000000000000000000000000
00700700000445555555555555555555555440000888888008a88a80777557770000000000000000000000000000000000000000000000000000000000000000
00077000000044555555555555555555554400000088880008888880777557770000000000000000000000000000000000000000000000000000000000000000
00077000000004444444444444444444444000000080080000888800777557770000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000080080000800800777777770000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000080080000800800777557770000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000080080000800800077777700000000000000000000000000000000000000000000000000000000000000000
00000000044555555555555555555555555554400445555555555555555555555555544000000000000000000000000000000000000000000000000000000000
00000000004455555555555555555555555544000044cccccccccccccccccccccccc440000000000000000000000000000000000000000000000000000000000
000000000004455555555555555555555554400000044cccccccccccccccccccccc4400000000000000000000000000000000000000000000000000000000000
00000000000044cccccccccccccccccccc440000000044cccccccccccccccccccc44000000000000000000000000000000000000000000000000000000000000
00000000000004444444444444444444444000000000044444444444444444444440000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000004455555555555555555555555555440044cccccccccccccccccccccccccc44000000000000000000000000000000000000000000000000000000000
00000000004455555555555555555555555544000044cccccccccccccccccccccccc440000000000000000000000000000000000000000000000000000000000
0000000000044cccccccccccccccccccccc4400000044cccccccccccccccccccccc4400000000000000000000000000000000000000000000000000000000000
00000000000044cccccccccccccccccccc440000000044cccccccccccccccccccc44000000000000000000000000000000000000000000000000000000000000
00000000000004444444444444444444444000000000044444444444444444444440000000000000000000000000000000000000000000000000000000000000
